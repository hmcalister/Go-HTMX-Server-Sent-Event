<!DOCTYPE html>
<html data-theme="forest">

<head>
    <meta charset='utf-8'>
    <title>Global Button Click Tracker</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type="text/css" href='../css/output.css'>
    <script src="../htmx/htmx.js"></script>
    <script src="../htmx/sse.js"></script>
</head>

<body class="w-screen h-screen bg-base-100 text-white">
    <div class="container mx-auto p-5">
        <h1 class="mb-5 text-2xl font-bold text-center">Global Button Click Tracker</h1>
        <div class="mb-10">
            <h1 class="text-xl font-bold text-center">GLOBAL NUMBER OF CLICKS: <span id="globalNumberClicks" hx-ext="sse" sse-connect="/api/globalClickSSE" sse-swap="message"></span></h1>
        </div>
        <div class="flex w-full justify-evenly mb-10">
            <button class="btn btn-active btn-primary w-1/3" hx-get="/api/click" hx-swap="none">CLICK</button>
        </div>
        <hr class="mb-5">
        <div class="w-2/3 mx-auto text-center">
            <p class="mb-5">The number of clicks shown above counts all clicks from all users, ever (or rather, since the server was last reset). Notably, the number of clicks updates in real time with no additional input from the user. To see this for yourself, open another instance of this tab and click the button a few times, and note the original tab also shows the increased number!</p>
            <p class="mb-5">This is all done using <a href="https://htmx.org/" class="link link-primary">HTMX</a> and <a href="https://htmx.org/docs/#sse" class="link link-primary">Server Sent Events</a> which allows for data from the server (written in Go) to be sent over a long-lived HTTP connection. In essence, the number of clicks is tracked by the server and sent out every second to all the connected users.</p>
            <p class="mb-5">Why is this worthy of a demonstration? <a href="https://github.com/hmcalister/Go-HTMX-Server-Sent-Event" class="link link-primary">Have a look at how simple the server is and you'll see...</a></p>
        </div>
    </div>
</body>

</html>